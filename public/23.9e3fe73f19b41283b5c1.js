(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{S1vP:function(t,c,e){"use strict";e.r(c),e.d(c,"TasksModule",(function(){return yc}));var i=e("WT9V"),n=e("D57K"),a=e("IfiR"),o=e("ZrTn"),r=e("AwSQ"),s=e("L1Hv"),d=e("ZgNk"),l=e("2Mvu"),m=e("Mumn"),p=e("LoAr"),u=e("LPaM"),f=e("iZ6s"),b=e("kVmp"),g=e("Aqbr"),h=e("zvqR"),v=e("n47m"),y=e("hg70"),k=e("xZX4"),C=e("EJve"),w=e("Oaad"),I=e("iNaJ"),K=e("Suc1");function q(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Task Number is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function Y(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Due Date is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function Z(t,c){if(1&t&&(p.ec(0,"mat-option",30),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.value),p.Kb(1),p.Zc(e.name.toUpperCase())}}function x(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Task Priority is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function W(t,c){if(1&t&&(p.ec(0,"mat-option",30),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.id),p.Kb(1),p.Zc(e.name.toUpperCase())}}function T(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Name is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}var O=function(){function t(t,c,e){this.formBuilder=t,this.http=c,this.messageService=e,this.dataLoaded=!0,this.priorityOptions=s.e,this.outClose=new p.q,this.outTask=new p.q,this.submit=!1,this.ckEditor=w,this.editorConfig={removePlugins:["Title"],toolbar:["heading","|","fontSize","fontFamily","|","bold","italic","underline","strikethrough","highlight","fontColor","fontBackgroundColor","|","alignment","|","numberedList","bulletedList","todoList","|","indent","outdent","pageBreak","|","link","blockQuote","imageUpload","insertTable","mediaEmbed","|","undo","redo"],image:{toolbar:["imageTextAlternative","|","imageStyle:alignLeft","imageStyle:full","imageStyle:alignRight"],styles:["full","alignLeft","alignRight"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}return Object.defineProperty(t.prototype,"f",{get:function(){return this.taskForm.controls},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.taskForm=this.formBuilder.group({name:[this.task.name,a.x.required],taskNo:[this.task.taskNo,a.x.required],description:[this.task.description,a.x.required],priority:[this.task.priority,a.x.required],assignedTo:[this.task.assignedTo.map((function(t){return t.id})),a.x.required],dueDate:[new Date,a.x.required]}),this.channelUsers=this.channel.members},t.prototype.close=function(){this.outClose.emit(!0)},t.prototype.saveEdit=function(){var t=this;if(this.submit=!0,this.taskForm.updateValueAndValidity(),!this.taskForm.invalid){var c=this.taskForm.value;c.channel=this.channel;var e=[];c.tab=this.task.tab,c.id=this.task.id,c.assignedTo.forEach((function(c){e.push(t.channelUsers.find((function(t){return t.id===+c})))})),c.assignedTo=e,this.http.updateTask(c).pipe(Object(l.a)()).subscribe((function(c){t.outTask.emit(c),t.messageService.add({severity:"success",summary:"Task information updated successfully."}),t.outClose.emit(!0)}))}},t.prototype.onReady=function(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},t.\u0275fac=function(c){return new(c||t)(p.Yb(a.d),p.Yb(d.a),p.Yb(f.g))},t.\u0275cmp=p.Sb({type:t,selectors:[["app-tasks-data"]],inputs:{task:"task",channel:"channel"},outputs:{outClose:"outClose",outTask:"outTask"},decls:52,vars:16,consts:[[1,"content","container-fluid"],[1,"page-header"],[1,"breadcrumb","px-0"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col"],[1,"mb-2"],[1,"p-2","bg-info"],[1,"fa","fa-bookmark","text-warning","mr-2"],[1,"page-title"],[1,"btn","btn-sm","btn-danger","float-right","mr-1",3,"click"],[1,"fa","fa-close"],[1,"animated","fadeIn","mt-3"],[1,"row",3,"formGroup"],[1,"col-md-4","order-md-last","order-sm-first"],[1,"d-block"],["matInput","","type","text","formControlName","taskNo","placeholder","Task Number"],[4,"ngIf"],[1,"d-block","mt-2"],["formControlName","dueDate","matInput","","placeholder","Due Date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dobPicker",""],["formControlName","priority"],[3,"value",4,"ngFor","ngForOf"],["formControlName","assignedTo","multiple",""],[1,"btn","btn-block","btn-success","mt-4",3,"click"],[1,"col-md-8","mb-4","order-md-first","order-sm-last"],["matInput","","type","text","formControlName","name","placeholder","Task Name"],["formControlName","description",3,"config","editor","ready"],[3,"value"]],template:function(t,c){if(1&t&&(p.ec(0,"div",0),p.ec(1,"div",1),p.ec(2,"ul",2),p.ec(3,"li",3),p.Yc(4,"Channels"),p.dc(),p.ec(5,"li",4),p.Yc(6),p.dc(),p.ec(7,"li",4),p.Yc(8),p.dc(),p.ec(9,"li",4),p.Yc(10),p.dc(),p.dc(),p.ec(11,"div",5),p.ec(12,"div",6),p.ec(13,"div",7),p.ec(14,"span",8),p.Zb(15,"i",9),p.Yc(16),p.dc(),p.dc(),p.ec(17,"h3",10),p.ec(18,"span"),p.Yc(19),p.dc(),p.ec(20,"button",11),p.mc("click",(function(){return c.close()})),p.Zb(21,"i",12),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.ec(22,"div",13),p.ec(23,"form",14),p.ec(24,"div",15),p.ec(25,"mat-form-field",16),p.Zb(26,"input",17),p.Wc(27,q,4,0,"mat-error",18),p.dc(),p.ec(28,"mat-form-field",19),p.Zb(29,"input",20),p.Zb(30,"mat-datepicker-toggle",21),p.Zb(31,"mat-datepicker",null,22),p.Wc(33,Y,4,0,"mat-error",18),p.dc(),p.ec(34,"mat-form-field",19),p.ec(35,"mat-label"),p.Yc(36,"Priority"),p.dc(),p.ec(37,"mat-select",23),p.Wc(38,Z,2,2,"mat-option",24),p.dc(),p.Wc(39,x,4,0,"mat-error",18),p.dc(),p.ec(40,"mat-form-field",19),p.ec(41,"mat-label"),p.Yc(42,"Assign To"),p.dc(),p.ec(43,"mat-select",25),p.Wc(44,W,2,2,"mat-option",24),p.dc(),p.dc(),p.ec(45,"button",26),p.mc("click",(function(){return c.saveEdit()})),p.Yc(46,"Save Task"),p.dc(),p.dc(),p.ec(47,"div",27),p.ec(48,"mat-form-field",16),p.Zb(49,"input",28),p.Wc(50,T,4,0,"mat-error",18),p.dc(),p.ec(51,"ckeditor",29),p.mc("ready",(function(t){return c.onReady(t)})),p.dc(),p.dc(),p.dc(),p.dc(),p.dc()),2&t){var e=p.Lc(32);p.Kb(6),p.Zc(c.task.channelName),p.Kb(2),p.Zc(c.task.name),p.Kb(2),p.Zc(c.task.taskNo),p.Kb(6),p.ad(" ",c.task.taskNo,""),p.Kb(3),p.Zc(c.task.name),p.Kb(4),p.yc("formGroup",c.taskForm),p.Kb(4),p.yc("ngIf",c.submit&&c.f.taskNo.hasError("required")),p.Kb(2),p.yc("matDatepicker",e),p.Kb(1),p.yc("for",e),p.Kb(3),p.yc("ngIf",c.submit&&c.f.dueDate.hasError("required")),p.Kb(5),p.yc("ngForOf",c.priorityOptions),p.Kb(1),p.yc("ngIf",c.submit&&c.f.priority.hasError("required")),p.Kb(5),p.yc("ngForOf",c.channelUsers),p.Kb(6),p.yc("ngIf",c.submit&&c.f.name.hasError("required")),p.Kb(1),p.yc("config",c.editorConfig)("editor",c.ckEditor)}},directives:[a.z,a.q,a.i,b.c,g.b,a.c,a.p,a.g,i.m,I.b,a.v,I.d,b.g,I.a,b.f,h.a,i.l,K.a,b.b,v.j],styles:[""]}),t}(),L=e("edAX"),N=e("cxLy");function D(t,c){1&t&&(p.ec(0,"button",48),p.Zb(1,"i",49),p.dc())}function F(t,c){1&t&&(p.ec(0,"button",50),p.Zb(1,"i",51),p.dc())}function S(t,c){1&t&&(p.ec(0,"button",52),p.Zb(1,"i",53),p.dc())}function U(t,c){if(1&t&&(p.ec(0,"span",14),p.Yc(1),p.dc()),2&t){var e=p.qc(2);p.Kb(1),p.ad(" ",e.task.priority.toUpperCase()," ")}}function $(t,c){if(1&t&&(p.ec(0,"mat-option",57),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.value),p.Kb(1),p.Zc(e.name.toUpperCase())}}function P(t,c){if(1&t&&(p.ec(0,"mat-form-field",54),p.ec(1,"mat-label"),p.Yc(2,"Priority"),p.dc(),p.ec(3,"mat-select",55),p.Wc(4,$,2,2,"mat-option",56),p.dc(),p.dc()),2&t){var e=p.qc(2);p.Kb(3),p.yc("formControl",e.priority),p.Kb(1),p.yc("ngForOf",e.priorityOptions)}}function j(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.name),p.zc("alt",e.name)}}function z(t,c){if(1&t&&p.Zb(0,"img",62),2&t){var e=p.qc().$implicit,i=p.qc(2);p.zc("tooltip",e.name),p.zc("alt",e.name),p.yc("src",i.fsPath+e.passport.link,p.Qc)}}function E(t,c){if(1&t&&p.Zb(0,"img",62),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.name),p.zc("alt",e.name),p.yc("src",e.avatar,p.Qc)}}function A(t,c){if(1&t&&(p.ec(0,"div",58),p.Wc(1,j,1,2,"img",59),p.Wc(2,z,1,3,"img",60),p.Wc(3,E,1,3,"img",60),p.dc()),2&t){var e=c.$implicit;p.Kb(1),p.yc("ngIf",!e.passport&&!e.avatar),p.Kb(1),p.yc("ngIf",e.passport),p.Kb(1),p.yc("ngIf",!e.passport&&e.avatar)}}function M(t,c){if(1&t&&p.Zb(0,"img",69),2&t){var e=p.qc().$implicit,i=p.qc(2);p.yc("src",i.fsPath+e.user.passport.link,p.Qc)}}function R(t,c){if(1&t&&p.Zb(0,"img",69),2&t){var e=p.qc().$implicit;p.yc("src",e.user.avatar,p.Qc)}}function Q(t,c){1&t&&p.Zb(0,"img",70)}function V(t,c){if(1&t){var e=p.fc();p.ec(0,"button",71),p.mc("click",(function(){p.Nc(e);var t=p.qc().$implicit;return p.qc(2).deleteComment(t)})),p.Zb(1,"i",72),p.dc()}}function _(t,c){if(1&t&&p.Zb(0,"img",73),2&t){var e=p.qc().$implicit,i=p.qc(2);p.yc("src",i.fsPath+e.docs.link,p.Qc)}}function H(t,c){if(1&t){var e=p.fc();p.ec(0,"a",74),p.mc("click",(function(){p.Nc(e);var t=p.qc().$implicit;return p.qc(2).downloadFile(t.docs)})),p.Yc(1),p.dc()}if(2&t){var i=p.qc().$implicit;p.Kb(1),p.Zc(i.docs.name)}}function B(t,c){if(1&t&&(p.ec(0,"div",38),p.ec(1,"div",39),p.Wc(2,M,1,1,"img",40),p.Wc(3,R,1,1,"img",40),p.Wc(4,Q,1,0,"img",41),p.dc(),p.ec(5,"div",63),p.ec(6,"div",64),p.ec(7,"b"),p.Yc(8),p.dc(),p.ec(9,"span",65),p.Yc(10),p.rc(11,"date"),p.rc(12,"date"),p.Wc(13,V,2,0,"button",66),p.dc(),p.dc(),p.Wc(14,_,1,1,"img",67),p.Wc(15,H,2,1,"a",68),p.ec(16,"div"),p.Yc(17),p.dc(),p.dc(),p.dc()),2&t){var e=c.$implicit,i=p.qc(2);p.Kb(2),p.yc("ngIf",e.user.passport),p.Kb(1),p.yc("ngIf",!e.user.passport&&e.user.avatar),p.Kb(1),p.yc("ngIf",!e.user.passport&&!e.user.avatar),p.Kb(4),p.Zc(e.user.name),p.Kb(2),p.bd(" ",p.sc(11,10,e.created_at)," at ",p.tc(12,12,e.created_at,"h:s")," "),p.Kb(3),p.yc("ngIf",e.user.id-0==i.loginUser.id-0),p.Kb(1),p.yc("ngIf",e.docs&&e.docs.fileType.includes("image")),p.Kb(1),p.yc("ngIf",e.docs&&!e.docs.fileType.includes("image")),p.Kb(2),p.Zc(e.comment)}}function G(t,c){if(1&t&&p.Zb(0,"img",69),2&t){var e=p.qc(2);p.yc("src",e.fsPath+e.loginUser.passport.link,p.Qc)}}function X(t,c){if(1&t&&p.Zb(0,"img",69),2&t){var e=p.qc(2);p.yc("src",e.loginUser.avatar,p.Qc)}}function J(t,c){1&t&&p.Zb(0,"img",70)}function tt(t,c){if(1&t){var e=p.fc();p.ec(0,"div"),p.ec(1,"div",4),p.ec(2,"div",5),p.ec(3,"ul",6),p.ec(4,"li",7),p.Yc(5,"Channels"),p.dc(),p.ec(6,"li",8),p.Yc(7),p.dc(),p.ec(8,"li",8),p.Yc(9),p.dc(),p.ec(10,"li",8),p.Yc(11),p.dc(),p.dc(),p.ec(12,"div",9),p.ec(13,"div",10),p.ec(14,"div",11),p.ec(15,"span",12),p.Zb(16,"i",13),p.Yc(17),p.dc(),p.dc(),p.ec(18,"h3",14),p.ec(19,"span"),p.Yc(20),p.dc(),p.ec(21,"button",15),p.mc("click",(function(){return p.Nc(e),p.qc().view=2})),p.Zb(22,"i",16),p.dc(),p.ec(23,"button",17),p.mc("click",(function(){return p.Nc(e),p.qc().close()})),p.Zb(24,"i",18),p.dc(),p.ec(25,"button",19),p.mc("click",(function(){return p.Nc(e),p.qc().delete()})),p.Zb(26,"i",20),p.Yc(27," Delete Task"),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.ec(28,"div",21),p.ec(29,"div",9),p.ec(30,"div",22),p.ec(31,"div",11),p.ec(32,"span",12),p.Zb(33,"i",23),p.Yc(34," Priority"),p.dc(),p.dc(),p.ec(35,"span",24),p.mc("click",(function(){p.Nc(e);var t=p.qc();return t.changePriority=!t.changePriority})),p.Wc(36,D,2,0,"button",25),p.Wc(37,F,2,0,"button",26),p.Wc(38,S,2,0,"button",27),p.dc(),p.Wc(39,U,2,1,"span",28),p.Wc(40,P,5,2,"mat-form-field",29),p.ec(41,"div",30),p.ec(42,"span",12),p.Zb(43,"i",31),p.Yc(44," Tab"),p.dc(),p.dc(),p.ec(45,"h6"),p.Yc(46),p.dc(),p.ec(47,"div",30),p.ec(48,"span",12),p.Zb(49,"i",31),p.Yc(50," Assignee"),p.dc(),p.dc(),p.ec(51,"div",32),p.Wc(52,A,4,3,"div",33),p.dc(),p.Zb(53,"hr"),p.ec(54,"span",34),p.Yc(55),p.rc(56,"date"),p.rc(57,"date"),p.dc(),p.ec(58,"span",34),p.Yc(59),p.rc(60,"date"),p.rc(61,"date"),p.dc(),p.dc(),p.ec(62,"div",35),p.ec(63,"p"),p.Yc(64,"Description"),p.dc(),p.Zb(65,"div",36),p.rc(66,"sanitizeHtml"),p.Zb(67,"hr"),p.Wc(68,B,18,15,"div",37),p.ec(69,"div",38),p.ec(70,"div",39),p.Wc(71,G,1,1,"img",40),p.Wc(72,X,1,1,"img",40),p.Wc(73,J,1,0,"img",41),p.dc(),p.ec(74,"div",42),p.ec(75,"mat-form-field",43),p.Zb(76,"textarea",44),p.dc(),p.ec(77,"button",45),p.mc("click",(function(){p.Nc(e);var t=p.qc(),c=p.Lc(4);return t.upload(c)})),p.Zb(78,"i",46),p.dc(),p.ec(79,"button",47),p.mc("click",(function(){return p.Nc(e),p.qc().postComment()})),p.Yc(80,"Post Comment"),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.dc()}if(2&t){var i=p.qc();p.Kb(7),p.Zc(i.task.channelName),p.Kb(2),p.Zc(i.task.name),p.Kb(2),p.Zc(i.task.taskNo),p.Kb(6),p.ad(" ",i.task.taskNo,""),p.Kb(3),p.Zc(i.task.name),p.Kb(16),p.yc("ngIf",i.task.priority.toLowerCase().includes("low")||i.task.priority.toLowerCase().includes("could")),p.Kb(1),p.yc("ngIf",i.task.priority.toLowerCase().includes("medium")||i.task.priority.toLowerCase().includes("moderate")||!i.task.priority),p.Kb(1),p.yc("ngIf",i.task.priority.toLowerCase().includes("high")||i.task.priority.toLowerCase().includes("must")),p.Kb(1),p.yc("ngIf",!i.changePriority),p.Kb(1),p.yc("ngIf",i.changePriority),p.Kb(6),p.Zc(i.task.tab.toUpperCase()),p.Kb(6),p.yc("ngForOf",i.task.assignedTo),p.Kb(3),p.bd("Created: ",p.sc(56,22,i.task.created_at)," at ",p.tc(57,24,i.task.created_at,"h:s"),""),p.Kb(4),p.bd("Updated: ",p.sc(60,27,i.task.updated_at)," at ",p.tc(61,29,i.task.updated_at,"h:s"),""),p.Kb(6),p.yc("innerHTML",p.sc(66,32,i.task.description),p.Oc),p.Kb(3),p.yc("ngForOf",i.task.comments),p.Kb(3),p.yc("ngIf",i.loginUser.passport),p.Kb(1),p.yc("ngIf",!i.loginUser.passport&&i.loginUser.avatar),p.Kb(1),p.yc("ngIf",!i.loginUser.passport&&!i.loginUser.avatar),p.Kb(3),p.yc("formControl",i.comment)}}function ct(t,c){if(1&t){var e=p.fc();p.ec(0,"app-tasks-data",75),p.mc("outClose",(function(){return p.Nc(e),p.qc().view=1}))("outTask",(function(t){p.Nc(e);var c=p.qc();return c.task=t,c.outTask.emit(t)})),p.dc()}if(2&t){var i=p.qc();p.yc("task",i.task)("channel",i.channel)}}function et(t,c){if(1&t){var e=p.fc();p.ec(0,"div",83),p.ec(1,"div",84),p.ec(2,"label",85),p.Yc(3,"Select File"),p.dc(),p.ec(4,"input",86),p.mc("change",(function(t){return p.Nc(e),p.qc(2).readURL(t,"document")})),p.dc(),p.ec(5,"span",87),p.Yc(6),p.dc(),p.dc(),p.ec(7,"div",84),p.ec(8,"label",88),p.Yc(9,"Comment"),p.dc(),p.Zb(10,"textarea",89),p.dc(),p.dc()}if(2&t){var i=p.qc(2);p.Kb(6),p.Zc(i.fileError),p.Kb(4),p.yc("formControl",i.comment)}}function it(t,c){1&t&&(p.ec(0,"div",90),p.ec(1,"div",91),p.Zb(2,"mat-spinner"),p.dc(),p.dc())}function nt(t,c){if(1&t){var e=p.fc();p.ec(0,"div",92),p.ec(1,"button",93),p.mc("click",(function(){return p.Nc(e),p.qc(2).uploadModal.hide()})),p.Yc(2,"Close"),p.dc(),p.ec(3,"button",94),p.mc("click",(function(){return p.Nc(e),p.qc(2).postFile()})),p.Yc(4,"Post File"),p.dc(),p.dc()}}function at(t,c){if(1&t){var e=p.fc();p.ec(0,"div",76),p.ec(1,"h4",77),p.Yc(2,"Add File"),p.dc(),p.ec(3,"button",78),p.mc("click",(function(){return p.Nc(e),p.qc().uploadModal.hide()})),p.ec(4,"span",79),p.Yc(5,"\xd7"),p.dc(),p.dc(),p.dc(),p.Wc(6,et,11,2,"div",80),p.Wc(7,it,3,0,"div",81),p.Wc(8,nt,5,0,"div",82)}if(2&t){var i=p.qc();p.Kb(6),p.yc("ngIf",!i.uploading),p.Kb(1),p.yc("ngIf",i.uploading),p.Kb(1),p.yc("ngIf",!i.uploading)}}var ot=function(){function t(t,c,e,i,n){this.http=t,this.modalService=c,this.messageService=e,this.confirmService=i,this.dataService=n,this.closed=new p.q,this.priorityOptions=s.e,this.comment=new a.e("",a.x.required),this.changePriority=!1,this.changeName=!1,this.priority=new a.e("",a.x.required),this.outTask=new p.q,this.deleted=new p.q,this.nameChange=new a.e("",a.x.required),this.fsPath=m.a.mainUrl+m.a.fsDL+"/",this.view=1,this.date=new Date,this.uploadResponse={status:"",message:"",filePath:""}}return t.prototype.ngOnInit=function(){var t=this;this.loginUser=this.dataService.getUser(),this.task.channel=this.channel,this.priority.setValue(this.task.priority),this.nameChange.setValue(this.task.name),this.priority.valueChanges.subscribe((function(c){t.task.priority=c,t.changePriority=!t.changePriority,t.put()})),this.nameChange.valueChanges.subscribe((function(c){t.task.name=c,t.changeName=!t.changeName,t.put()}))},t.prototype.close=function(){this.closed.emit(!0)},t.prototype.delete=function(){var t=this;this.confirmService.confirm({message:"Are you sure you want to delete Task?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){t.http.deleteTask(t.task.id).pipe(Object(l.a)()).subscribe((function(){t.messageService.add({severity:"success",summary:"Delete Success",detail:"Channel Removed from Platform!"}),t.deleted.emit(t.task),t.closed.emit(!0)}))},reject:function(){}})},t.prototype.put=function(){var t=this;this.http.updateTask(this.task).pipe(Object(l.a)()).subscribe((function(c){t.messageService.add({severity:"success",summary:"Task Updated Successfully"}),t.outTask.emit(c)}))},t.prototype.postComment=function(){var t=this;if(!this.comment.invalid){var c=new s.b;c.comment=this.comment.value,c.task=this.task,c.task.channel=this.channel,this.http.saveComments(c).pipe(Object(l.a)()).subscribe((function(c){t.task.comments||(t.task.comments=[]),t.task.comments=Object(n.i)(t.task.comments,[c]),t.comment.reset()}))}},t.prototype.deleteComment=function(t){var c=this;this.confirmService.confirm({message:"Are you sure you want to delete comment?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){c.http.deleteComment(t.id).pipe(Object(l.a)()).subscribe((function(){c.messageService.add({severity:"success",summary:"Delete Success",detail:"Comment deleted!"}),c.task.comments=c.task.comments.filter((function(c){return c.id!==t.id}))}))},reject:function(){}})},t.prototype.upload=function(t){this.fileError="",this.uploadModal=this.modalService.show(t,{backdrop:"static",keyboard:!1})},t.prototype.readURL=function(t,c){var e=this;if(this.fileError="",t.target.files&&t.target.files[0]){var i=t.target.files[0],n=Object(s.f)(i,c,1024e3);if(!0!==n)return void(this.fileError=n);Object(C.b)(i).then((function(t){t.name&&(e.pendingUpload=t)}))}},t.prototype.postFile=function(){var t=this;if(!this.comment.invalid){this.uploading=!0;var c=Object(C.a)(this.pendingUpload,{tag:"comment",objID:0});this.http.saveFile(c).pipe(Object(l.a)()).subscribe((function(c){t.uploadResponse=c;var e=new s.b;e.comment=t.comment.value,e.task=t.task,e.file=c,t.http.saveComments(e).pipe(Object(l.a)()).subscribe((function(c){t.task.comments||(t.task.comments=[]),t.task.comments=Object(n.i)(t.task.comments,[c]),t.comment.reset(),t.uploading=!0,t.uploadModal.hide()}))}))}},t.prototype.downloadFile=function(t){return window.open(m.a.mainUrl+"/api/v1/docs/dl/"+t.link+"?token="+encodeURIComponent(this.token),"_blank"),!1},t.\u0275fac=function(c){return new(c||t)(p.Yb(d.a),p.Yb(u.a),p.Yb(f.g),p.Yb(f.b),p.Yb(r.a))},t.\u0275cmp=p.Sb({type:t,selectors:[["app-task-view"]],inputs:{task:"task",channel:"channel"},outputs:{closed:"closed",outTask:"outTask",deleted:"deleted"},decls:5,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"task","channel","outClose","outTask",4,"ngSwitchCase"],["uploadTemp",""],[1,"content","container-fluid"],[1,"page-header"],[1,"breadcrumb","px-0"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col"],[1,"mb-2"],[1,"p-2","bg-info"],[1,"fa","fa-bookmark","text-warning","mr-2"],[1,"page-title"],[1,"btn","btn-sm","btn-primary","mr-2","ml-5",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-sm","btn-danger","float-right","mr-1",3,"click"],[1,"fa","fa-close"],[1,"btn","btn-sm","btn-ghost-danger","float-right","mr-2",3,"click"],[1,"fa","fa-trash-o"],[1,"animated","fadeIn","bg-white","p-4"],[1,"col-md-4","order-md-last","order-sm-first","py-md-5","py-sm-2"],[1,"fa","fa-info","text-warning","mr-2"],[1,"pr-2",3,"click"],["class","btn btn-ghost-info btn-sm","tooltip","Low Priority. Click to Change",4,"ngIf"],["class","btn btn-ghost-warning btn-sm","tooltip","Moderate Priority. Click to Change",4,"ngIf"],["class","btn btn-ghost-danger btn-sm","tooltip","High Priority. Click to Change",4,"ngIf"],["class","page-title",4,"ngIf"],["class","",4,"ngIf"],[1,"mt-4","mb-2"],[1,"fa","fa-tag","text-primary","mr-2"],[1,"avatars-stack"],["class","avatar avatar-xs",4,"ngFor","ngForOf"],[1,"d-block","text-muted"],[1,"col-md-8","mb-4","order-md-first","order-sm-last"],[1,"bg-grey","py-3","px-2",3,"innerHTML"],["class","d-flex d-block",4,"ngFor","ngForOf"],[1,"d-flex","d-block"],[1,"mr-2","mt-3"],["class","img-avatar","style","height: 35px; width: 35px;",3,"src",4,"ngIf"],["src","assets/img/avatars/0.png","class","img-avatar","style","height: 35px; width: 35px;",4,"ngIf"],[2,"width","70%"],[1,"d-block","mt-2"],["matInput","","type","text","placeholder","Your Comment","rows","3",3,"formControl"],[1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"fa","fa-cloud-upload"],[1,"btn","btn-sm","btn-success",3,"click"],["tooltip","Low Priority. Click to Change",1,"btn","btn-ghost-info","btn-sm"],[1,"fa","fa-arrow-down"],["tooltip","Moderate Priority. Click to Change",1,"btn","btn-ghost-warning","btn-sm"],[1,"fa","fa-arrow-right"],["tooltip","High Priority. Click to Change",1,"btn","btn-ghost-danger","btn-sm"],[1,"fa","fa-arrow-up"],[1,""],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"avatar","avatar-xs"],["src","assets/img/avatars/0.png","class","img-avatar",3,"tooltip","alt",4,"ngIf"],["class","img-avatar",3,"tooltip","src","alt",4,"ngIf"],["src","assets/img/avatars/0.png",1,"img-avatar",3,"tooltip","alt"],[1,"img-avatar",3,"tooltip","src","alt"],[1,"p-2",2,"width","85%"],[1,"py-2"],[1,"float-right","text-muted"],["tooltip","Delete Comment","class","btn btn-xs btn-ghost-danger mx-2",3,"click",4,"ngIf"],["alt","sample","class","rounded mw-100",3,"src",4,"ngIf"],["href","#",3,"click",4,"ngIf"],[1,"img-avatar",2,"height","35px","width","35px",3,"src"],["src","assets/img/avatars/0.png",1,"img-avatar",2,"height","35px","width","35px"],["tooltip","Delete Comment",1,"btn","btn-xs","btn-ghost-danger","mx-2",3,"click"],[1,"fa","fa-trash"],["alt","sample",1,"rounded","mw-100",3,"src"],["href","#",3,"click"],[3,"task","channel","outClose","outTask"],[1,"modal-header"],[1,"modal-title"],["aria-label","Close","type","button",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],["class","modal-body align-content-center mx-auto",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"modal-body"],[1,"form-group"],["for","select1"],["id","select1","type","file",1,"form-control",3,"change"],[1,"text-red"],["for","roles"],["id","roles","placeholder","Your comment or file description","type","text","rows","3",1,"form-control",3,"formControl"],[1,"modal-body","align-content-center","mx-auto"],[1,"text-center"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,c){1&t&&(p.ec(0,"div",0),p.Wc(1,tt,81,34,"div",1),p.Wc(2,ct,1,2,"app-tasks-data",2),p.dc(),p.Wc(3,at,9,3,"ng-template",null,3,p.Xc)),2&t&&(p.yc("ngSwitch",c.view),p.Kb(1),p.yc("ngSwitchCase",1),p.Kb(1),p.yc("ngSwitchCase",2))},directives:[i.o,i.p,i.m,i.l,b.c,g.b,a.c,a.p,a.f,y.a,b.f,h.a,v.j,O,L.b],pipes:[i.e,N.a],styles:[".bg-grey[_ngcontent-%COMP%]{color:#000;background-color:#d3d3d3}"]}),t}();function rt(t,c){if(1&t&&(p.ec(0,"mat-option",27),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.id),p.Kb(1),p.Zc(e.name)}}function st(t,c){if(1&t&&(p.ec(0,"mat-form-field",20),p.ec(1,"mat-label"),p.Yc(2,"Channel"),p.dc(),p.ec(3,"mat-select",25),p.Wc(4,rt,2,2,"mat-option",26),p.dc(),p.dc()),2&t){var e=p.qc(2);p.Kb(3),p.yc("formControl",e.channel),p.Kb(1),p.yc("ngForOf",e.channelOpts)}}function dt(t,c){1&t&&(p.ec(0,"a",28),p.Yc(1,"Create Channel"),p.dc())}function lt(t,c){if(1&t&&p.Zb(0,"img",32),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.name),p.zc("alt",e.name)}}function mt(t,c){if(1&t&&p.Zb(0,"img",33),2&t){var e=p.qc().$implicit,i=p.qc(2);p.zc("tooltip",e.name),p.zc("alt",e.name),p.yc("src",i.fsPath+e.passport.link,p.Qc)}}function pt(t,c){if(1&t&&p.Zb(0,"img",33),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.name),p.zc("alt",e.name),p.yc("src",e.avatar,p.Qc)}}function ut(t,c){if(1&t&&(p.ec(0,"div",29),p.Wc(1,lt,1,2,"img",30),p.Wc(2,mt,1,3,"img",31),p.Wc(3,pt,1,3,"img",31),p.dc()),2&t){var e=c.$implicit;p.Kb(1),p.yc("ngIf",!e.passport&&!e.avatar),p.Kb(1),p.yc("ngIf",e.passport),p.Kb(1),p.yc("ngIf",!e.passport&&e.avatar)}}function ft(t,c){1&t&&p.Zb(0,"div",57)}function bt(t,c){if(1&t&&p.Zb(0,"img",60),2&t){var e=p.qc().$implicit;p.zc("alt",e.name)}}function gt(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit,i=p.qc(4);p.zc("alt",e.name),p.yc("src",i.fsPath+e.passport.link,p.Qc)}}function ht(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit;p.zc("alt",e.name),p.yc("src",e.avatar,p.Qc)}}function vt(t,c){if(1&t&&(p.ec(0,"div",29),p.Wc(1,bt,1,1,"img",58),p.Wc(2,gt,1,2,"img",59),p.Wc(3,ht,1,2,"img",59),p.dc()),2&t){var e=c.$implicit;p.Kb(1),p.yc("ngIf",!e.passport&&!e.avatar),p.Kb(1),p.yc("ngIf",e.passport),p.Kb(1),p.yc("ngIf",!e.passport&&e.avatar)}}function yt(t,c){if(1&t&&(p.ec(0,"button",62),p.Zb(1,"i",63),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function kt(t,c){if(1&t&&(p.ec(0,"button",64),p.Zb(1,"i",65),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function Ct(t,c){if(1&t&&(p.ec(0,"button",66),p.Zb(1,"i",67),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function wt(t,c){if(1&t){var e=p.fc();p.ec(0,"li",70),p.ec(1,"button",71),p.mc("click",(function(){p.Nc(e);var t=c.$implicit,i=p.qc(2).$implicit;return p.qc(3).changePriority(i,t)})),p.Yc(2),p.dc(),p.dc()}if(2&t){var i=c.$implicit;p.Kb(1),p.Nb("btn btn-block btn-ghost-",i.class," dropdown-item"),p.Kb(1),p.Zc(i.name)}}function It(t,c){if(1&t&&(p.ec(0,"ul",68),p.Wc(1,wt,3,4,"li",69),p.dc()),2&t){var e=p.qc(4);p.Kb(1),p.yc("ngForOf",e.priorityOptions)}}function Kt(t,c){if(1&t){var e=p.fc();p.ec(0,"div",45),p.Wc(1,ft,1,0,"div",46),p.ec(2,"div",47),p.mc("click",(function(){p.Nc(e);var t=c.$implicit;return p.qc(3).docDetail(t)})),p.Yc(3),p.dc(),p.ec(4,"div",48),p.ec(5,"div",12),p.ec(6,"div",49),p.ec(7,"div",17),p.Wc(8,vt,4,3,"div",18),p.dc(),p.ec(9,"p",50),p.Yc(10),p.dc(),p.dc(),p.ec(11,"div",51),p.ec(12,"span",52),p.Wc(13,yt,2,1,"button",53),p.Wc(14,kt,2,1,"button",54),p.Wc(15,Ct,2,1,"button",55),p.Wc(16,It,2,1,"ul",56),p.dc(),p.dc(),p.dc(),p.dc(),p.dc()}if(2&t){var i=c.$implicit;p.Kb(3),p.ad(" ",i.name," "),p.Kb(5),p.yc("ngForOf",i.assignedTo),p.Kb(2),p.Zc(i.taskNo.toUpperCase()),p.Kb(3),p.yc("ngIf",i.priority.toLowerCase().includes("low")||i.priority.toLowerCase().includes("could")),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("medium")||i.priority.toLowerCase().includes("moderate")||!i.priority),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("high")||i.priority.toLowerCase().includes("must"))}}function qt(t,c){1&t&&p.Zb(0,"div",57)}function Yt(t,c){if(1&t&&p.Zb(0,"img",60),2&t){var e=p.qc().$implicit;p.zc("alt",e.name)}}function Zt(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit,i=p.qc(4);p.zc("alt",e.name),p.yc("src",i.fsPath+e.passport.link,p.Qc)}}function xt(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit;p.zc("alt",e.name),p.yc("src",e.avatar,p.Qc)}}function Wt(t,c){if(1&t&&(p.ec(0,"div",29),p.Wc(1,Yt,1,1,"img",58),p.Wc(2,Zt,1,2,"img",59),p.Wc(3,xt,1,2,"img",59),p.dc()),2&t){var e=c.$implicit;p.Kb(1),p.yc("ngIf",!e.passport&&!e.avatar),p.Kb(1),p.yc("ngIf",e.passport),p.Kb(1),p.yc("ngIf",!e.passport&&e.avatar)}}function Tt(t,c){if(1&t&&(p.ec(0,"button",62),p.Zb(1,"i",63),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function Ot(t,c){if(1&t&&(p.ec(0,"button",64),p.Zb(1,"i",65),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function Lt(t,c){if(1&t&&(p.ec(0,"button",66),p.Zb(1,"i",67),p.dc()),2&t){var e=p.qc().$implicit;p.Ac("tooltip","",e.priority.toUpperCase(),". Click to Change")}}function Nt(t,c){if(1&t){var e=p.fc();p.ec(0,"li",70),p.ec(1,"button",71),p.mc("click",(function(){p.Nc(e);var t=c.$implicit,i=p.qc(2).$implicit;return p.qc(3).changePriority(i,t)})),p.Yc(2),p.dc(),p.dc()}if(2&t){var i=c.$implicit;p.Kb(1),p.Nb("btn btn-block btn-ghost-",i.class," dropdown-item"),p.Kb(1),p.Zc(i.name)}}function Dt(t,c){if(1&t&&(p.ec(0,"ul",68),p.Wc(1,Nt,3,4,"li",69),p.dc()),2&t){var e=p.qc(4);p.Kb(1),p.yc("ngForOf",e.priorityOptions)}}function Ft(t,c){if(1&t){var e=p.fc();p.ec(0,"div",45),p.Wc(1,qt,1,0,"div",46),p.ec(2,"div",47),p.mc("click",(function(){p.Nc(e);var t=c.$implicit;return p.qc(3).docDetail(t)})),p.Yc(3),p.dc(),p.ec(4,"div",48),p.ec(5,"div",12),p.ec(6,"div",49),p.ec(7,"div",17),p.Wc(8,Wt,4,3,"div",18),p.dc(),p.ec(9,"p",50),p.Yc(10),p.dc(),p.dc(),p.ec(11,"div",51),p.ec(12,"span",52),p.Wc(13,Tt,2,1,"button",53),p.Wc(14,Ot,2,1,"button",54),p.Wc(15,Lt,2,1,"button",55),p.Wc(16,Dt,2,1,"ul",56),p.dc(),p.dc(),p.dc(),p.dc(),p.dc()}if(2&t){var i=c.$implicit;p.Kb(3),p.ad(" ",i.name," "),p.Kb(5),p.yc("ngForOf",i.assignedTo),p.Kb(2),p.Zc(i.taskNo.toUpperCase()),p.Kb(3),p.yc("ngIf",i.priority.toLowerCase().includes("low")||i.priority.toLowerCase().includes("could")),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("medium")||i.priority.toLowerCase().includes("moderate")||!i.priority),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("high")||i.priority.toLowerCase().includes("must"))}}function St(t,c){1&t&&p.Zb(0,"div",57)}function Ut(t,c){if(1&t&&p.Zb(0,"img",60),2&t){var e=p.qc().$implicit;p.zc("alt",e.name)}}function $t(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit,i=p.qc(4);p.zc("alt",e.name),p.yc("src",i.fsPath+e.passport.link,p.Qc)}}function Pt(t,c){if(1&t&&p.Zb(0,"img",61),2&t){var e=p.qc().$implicit;p.zc("alt",e.name),p.yc("src",e.avatar,p.Qc)}}function jt(t,c){if(1&t&&(p.ec(0,"div",29),p.Wc(1,Ut,1,1,"img",58),p.Wc(2,$t,1,2,"img",59),p.Wc(3,Pt,1,2,"img",59),p.dc()),2&t){var e=c.$implicit;p.Kb(1),p.yc("ngIf",!e.passport&&!e.avatar),p.Kb(1),p.yc("ngIf",e.passport),p.Kb(1),p.yc("ngIf",!e.passport&&e.avatar)}}function zt(t,c){if(1&t&&(p.ec(0,"button",76),p.Zb(1,"i",63),p.dc()),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.priority.toUpperCase())}}function Et(t,c){if(1&t&&(p.ec(0,"button",77),p.Zb(1,"i",65),p.dc()),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.priority.toUpperCase())}}function At(t,c){if(1&t&&(p.ec(0,"button",78),p.Zb(1,"i",67),p.dc()),2&t){var e=p.qc().$implicit;p.zc("tooltip",e.priority.toUpperCase())}}function Mt(t,c){if(1&t){var e=p.fc();p.ec(0,"div",45),p.Wc(1,St,1,0,"div",46),p.ec(2,"div",47),p.mc("click",(function(){p.Nc(e);var t=c.$implicit;return p.qc(3).docDetail(t)})),p.Yc(3),p.dc(),p.ec(4,"div",48),p.ec(5,"div",12),p.ec(6,"div",49),p.ec(7,"div",17),p.Wc(8,jt,4,3,"div",18),p.dc(),p.ec(9,"p",50),p.Yc(10),p.dc(),p.dc(),p.ec(11,"div",51),p.ec(12,"span",72),p.Wc(13,zt,2,1,"button",73),p.Wc(14,Et,2,1,"button",74),p.Wc(15,At,2,1,"button",75),p.dc(),p.dc(),p.dc(),p.dc(),p.dc()}if(2&t){var i=c.$implicit;p.Kb(3),p.ad(" ",i.name," "),p.Kb(5),p.yc("ngForOf",i.assignedTo),p.Kb(2),p.Zc(i.taskNo.toUpperCase()),p.Kb(3),p.yc("ngIf",i.priority.toLowerCase().includes("low")||i.priority.toLowerCase().includes("could")),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("medium")||i.priority.toLowerCase().includes("moderate")||!i.priority),p.Kb(1),p.yc("ngIf",i.priority.toLowerCase().includes("high")||i.priority.toLowerCase().includes("must"))}}function Rt(t,c){if(1&t){var e=p.fc();p.ec(0,"div",34),p.ec(1,"div",19),p.ec(2,"div",35),p.ec(3,"div",36),p.Yc(4," Todo "),p.ec(5,"button",37),p.mc("click",(function(){p.Nc(e);var t=p.qc(2),c=p.Lc(4);return t.addTask(c)})),p.Zb(6,"i",38),p.dc(),p.dc(),p.ec(7,"div",39),p.mc("cdkDropListDropped",(function(t){return p.Nc(e),p.qc(2).drop(t)})),p.Wc(8,Kt,17,6,"div",40),p.dc(),p.dc(),p.dc(),p.ec(9,"div",19),p.ec(10,"div",35),p.ec(11,"div",41),p.Yc(12," In Progress "),p.dc(),p.ec(13,"div",42),p.mc("cdkDropListDropped",(function(t){return p.Nc(e),p.qc(2).drop(t)})),p.Wc(14,Ft,17,6,"div",40),p.dc(),p.dc(),p.dc(),p.ec(15,"div",19),p.ec(16,"div",35),p.ec(17,"div",43),p.Yc(18," Done "),p.dc(),p.ec(19,"div",44),p.mc("cdkDropListDropped",(function(t){return p.Nc(e),p.qc(2).drop(t)})),p.Wc(20,Mt,16,6,"div",40),p.dc(),p.dc(),p.dc(),p.dc()}if(2&t){var i=p.qc(2);p.Kb(7),p.yc("cdkDropListData",i.incoming),p.Kb(1),p.yc("ngForOf",i.incoming),p.Kb(5),p.yc("cdkDropListData",i.progress),p.Kb(1),p.yc("ngForOf",i.progress),p.Kb(5),p.yc("cdkDropListData",i.done),p.Kb(1),p.yc("ngForOf",i.done)}}function Qt(t,c){1&t&&(p.ec(0,"p",83),p.Yc(1,"There are no Channels on the platform. Create Channel first"),p.dc())}function Vt(t,c){if(1&t){var e=p.fc();p.ec(0,"button",84),p.mc("click",(function(){p.Nc(e);var t=p.qc(3),c=p.Lc(4);return t.addTask(c)})),p.Zb(1,"i",38),p.Yc(2," Add a new Task"),p.dc()}}function _t(t,c){if(1&t&&(p.ec(0,"div",79),p.ec(1,"div",80),p.Wc(2,Qt,2,0,"p",81),p.Wc(3,Vt,3,0,"button",82),p.dc(),p.dc()),2&t){var e=p.qc(2);p.Kb(2),p.yc("ngIf",(null==e.channelOpts?null:e.channelOpts.length)<1),p.Kb(1),p.yc("ngIf",(null==e.allItems?null:e.allItems.length)<1&&(null==e.channelOpts?null:e.channelOpts.length)>0&&e.channel.valid)}}function Ht(t,c){if(1&t){var e=p.fc();p.ec(0,"div",4),p.ec(1,"div",5),p.ec(2,"div",6),p.ec(3,"div",7),p.ec(4,"h3",8),p.Yc(5,"Tasks "),p.ec(6,"span",9),p.Zb(7,"i",10),p.Yc(8),p.dc(),p.dc(),p.dc(),p.dc(),p.dc(),p.ec(9,"div",11),p.ec(10,"div",12),p.ec(11,"div",13),p.Wc(12,st,5,2,"mat-form-field",14),p.Wc(13,dt,2,0,"a",15),p.dc(),p.ec(14,"div",16),p.ec(15,"div",17),p.Wc(16,ut,4,3,"div",18),p.dc(),p.dc(),p.ec(17,"div",19),p.ec(18,"mat-form-field",20),p.Zb(19,"input",21),p.ec(20,"i",22),p.mc("click",(function(){return p.Nc(e),p.qc().refresh()})),p.dc(),p.dc(),p.dc(),p.dc(),p.Wc(21,Rt,21,6,"div",23),p.Wc(22,_t,4,2,"div",24),p.dc(),p.dc()}if(2&t){var i=p.qc();p.Kb(8),p.ad(" ",i.loginUser.name," Desk"),p.Kb(4),p.yc("ngIf",(null==i.channelOpts?null:i.channelOpts.length)>0),p.Kb(1),p.yc("ngIf",(null==i.channelOpts?null:i.channelOpts.length)<1),p.Kb(3),p.yc("ngForOf",i.channelUsers),p.Kb(3),p.yc("formControl",i.searchForm),p.Kb(2),p.yc("ngIf",i.allItems.length>0),p.Kb(1),p.yc("ngIf",(null==i.allItems?null:i.allItems.length)<1)}}function Bt(t,c){if(1&t){var e=p.fc();p.ec(0,"app-task-view",85),p.mc("closed",(function(){return p.Nc(e),p.qc().view=1}))("deleted",(function(t){return p.Nc(e),p.qc().deleted(t)})),p.dc()}if(2&t){var i=p.qc();p.yc("task",i.curTask)("channel",i.selChannel)}}function Gt(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Task Number is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function Xt(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Name is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function Jt(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Task Description is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function tc(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Due Date is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function cc(t,c){if(1&t&&(p.ec(0,"mat-option",27),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.value),p.Kb(1),p.Zc(e.name.toUpperCase())}}function ec(t,c){1&t&&(p.ec(0,"mat-error"),p.Yc(1," Task Priority is "),p.ec(2,"strong"),p.Yc(3,"required"),p.dc(),p.dc())}function ic(t,c){if(1&t&&(p.ec(0,"mat-option",27),p.Yc(1),p.dc()),2&t){var e=c.$implicit;p.yc("value",e.id),p.Kb(1),p.Zc(e.name.toUpperCase())}}function nc(t,c){if(1&t){var e=p.fc();p.ec(0,"div",86),p.ec(1,"h4",87),p.Yc(2,"Add New Task"),p.dc(),p.ec(3,"button",88),p.mc("click",(function(){return p.Nc(e),p.qc().modalRef.hide()})),p.ec(4,"span",89),p.Yc(5,"\xd7"),p.dc(),p.dc(),p.dc(),p.ec(6,"div",90),p.ec(7,"form",91),p.ec(8,"mat-form-field",20),p.Zb(9,"input",92),p.Wc(10,Gt,4,0,"mat-error",93),p.dc(),p.ec(11,"mat-form-field",20),p.Zb(12,"input",94),p.Wc(13,Xt,4,0,"mat-error",93),p.dc(),p.ec(14,"mat-form-field",95),p.Zb(15,"textarea",96),p.Wc(16,Jt,4,0,"mat-error",93),p.dc(),p.ec(17,"mat-form-field",95),p.Zb(18,"input",97),p.Zb(19,"mat-datepicker-toggle",98),p.Zb(20,"mat-datepicker",null,99),p.Wc(22,tc,4,0,"mat-error",93),p.dc(),p.ec(23,"mat-form-field",95),p.ec(24,"mat-label"),p.Yc(25,"Priority"),p.dc(),p.ec(26,"mat-select",100),p.Wc(27,cc,2,2,"mat-option",26),p.dc(),p.Wc(28,ec,4,0,"mat-error",93),p.dc(),p.ec(29,"mat-form-field",95),p.ec(30,"mat-label"),p.Yc(31,"Assign To"),p.dc(),p.ec(32,"mat-select",101),p.Wc(33,ic,2,2,"mat-option",26),p.dc(),p.dc(),p.ec(34,"button",102),p.mc("click",(function(){return p.Nc(e),p.qc().newTask()})),p.Yc(35,"Add Task"),p.dc(),p.dc(),p.dc()}if(2&t){var i=p.Lc(21),n=p.qc();p.Kb(7),p.yc("formGroup",n.taskForm),p.Kb(3),p.yc("ngIf",n.submit&&n.f.taskNo.hasError("required")),p.Kb(3),p.yc("ngIf",n.submit&&n.f.name.hasError("required")),p.Kb(3),p.yc("ngIf",n.submit&&n.f.description.hasError("required")),p.Kb(2),p.yc("matDatepicker",i),p.Kb(1),p.yc("for",i),p.Kb(3),p.yc("ngIf",n.submit&&n.f.dueDate.hasError("required")),p.Kb(5),p.yc("ngForOf",n.priorityOptions),p.Kb(1),p.yc("ngIf",n.submit&&n.f.priority.hasError("required")),p.Kb(5),p.yc("ngForOf",n.channelUsers)}}var ac=function(){function t(t,c,e,i,n){this.dataService=t,this.http=c,this.modalService=e,this.messageService=i,this.formBuilder=n,this.dataLoaded=!1,this.priorityOptions=s.e,this.searchForm=new a.e(""),this.channelUsers=[],this.allItems=[],this.channel=new a.e("",a.x.required),this.channelOpts=[],this.submit=!1,this.fsPath=m.a.mainUrl+m.a.fsDL+"/",this.view=1}return Object.defineProperty(t.prototype,"f",{get:function(){return this.taskForm.controls},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.loginUser=this.dataService.getUser(),this.taskForm=this.formBuilder.group({name:["",a.x.required],taskNo:["TASK-",a.x.required],description:["",a.x.required],priority:["",a.x.required],assignedTo:[""],dueDate:[new Date,a.x.required]}),this.channel.valueChanges.subscribe((function(c){t.selChannel=t.channelOpts.find((function(t){return t.id===+c})),t.channelUsers=t.selChannel.members,t.getAllItems()})),this.http.getMyChannels().pipe(Object(l.a)()).subscribe((function(c){t.channelOpts=c,1===c.length&&(t.channel.setValue(c[0].id),t.selChannel=c[0],t.getAllItems()),t.dataLoaded=!0})),this.searchForm.valueChanges.subscribe((function(c){t.placeItems(!c||c.length<1?t.allItems:t.allItems.filter((function(t){return t.name.toLowerCase().includes(c.toLowerCase())||t.taskNo.toLowerCase().includes(c.toLowerCase())})))}))},t.prototype.drop=function(t){if(t.previousContainer===t.container)Object(o.f)(t.container.data,t.previousIndex,t.currentIndex),this.persistSort(this[c=t.container.id],c);else{var c;Object(o.g)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.persistSort(this[c=t.container.id],c);var e=t.previousContainer.id;this.persistSort(this[e],e)}this.allItems=Object(n.i)(this.incoming,this.done,this.progress)},t.prototype.changePriority=function(t,c){var e=this;t.priority=c.value,t.channel=this.selChannel,this.http.updateTask(t).pipe(Object(l.a)()).subscribe((function(t){e.allItems[e.allItems.indexOf(e.allItems.find((function(c){return c.id===t.id})))]=t,e.placeItems(e.allItems)}))},t.prototype.docDetail=function(t){this.curTask=t,this.view=2},t.prototype.addTask=function(t){var c=this,e=this.channelOpts.find((function(t){return+c.channel.value===t.id}));this.channelUsers=e.members,this.modalRef=this.modalService.show(t)},t.prototype.refresh=function(){this.channel.invalid||(this.dataLoaded=!1,this.getAllItems())},t.prototype.close=function(t){t&&(this.modalRef.hide(),this.view=1)},t.prototype.getAllItems=function(){var t=this;this.selChannel&&this.http.getTaskByChannel(this.selChannel.id).pipe(Object(l.a)()).subscribe((function(c){t.allItems=c,t.placeItems(c),t.dataLoaded=!0}))},t.prototype.placeItems=function(t){this.done=t.filter((function(t){return"done"===t.tab.toLowerCase()})),this.progress=t.filter((function(t){return"progress"===t.tab.toLowerCase()})),this.incoming=t.filter((function(t){return"todo"===t.tab.toLowerCase()||"incoming"===t.tab.toLowerCase()}))},t.prototype.newTask=function(){var t=this;if(this.taskForm.updateValueAndValidity(),!this.taskForm.invalid){var c=[],e=this.taskForm.value;e.tab="todo",e.assignedTo.forEach((function(e){c.push(t.selChannel.members.find((function(t){return t.id===e})))})),e.assignedTo=c,e.channel=this.selChannel,this.http.saveTask(e).pipe(Object(l.a)()).subscribe((function(c){t.incoming=Object(n.i)([c],t.incoming),t.allItems=Object(n.i)(t.allItems,[c]),t.modalRef.hide(),t.taskForm.reset({},{onlySelf:!0,emitEvent:!1}),t.messageService.add({severity:"success",summary:"Task added Successfully"})}))}},t.prototype.persistSort=function(t,c){var e=[];t.forEach((function(t,i){var n=new s.c;n.tab=c,n.id=t.id,n.position=i,e.push(n)})),e.length>0&&this.http.saveTaskSort(e).pipe(Object(l.a)()).subscribe((function(){return console.log("sort saved")}))},t.prototype.deleted=function(t){this.allItems=this.allItems.filter((function(c){return c.id!==t.id})),this.placeItems(this.allItems)},t.\u0275fac=function(c){return new(c||t)(p.Yb(r.a),p.Yb(d.a),p.Yb(u.a),p.Yb(f.g),p.Yb(a.d))},t.\u0275cmp=p.Sb({type:t,selectors:[["app-tasks"]],decls:5,vars:3,consts:[[3,"ngSwitch"],["class","content container-fluid",4,"ngSwitchCase"],[3,"task","channel","closed","deleted",4,"ngSwitchCase"],["addModal",""],[1,"content","container-fluid"],[1,"page-header"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],[1,"float-right"],[1,"fa","fa-user"],[1,"animated","fadeIn"],[1,"row"],[1,"col-md-3"],["class","d-block",4,"ngIf"],["href","#/channels","class","btn btn-block btn-info",4,"ngIf"],[1,"col-md-5"],[1,"avatars-stack","mr-2","pr-4"],["class","avatar avatar-xs",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"d-block"],["matInput","","type","text","placeholder","Search...",3,"formControl"],["matSuffix","",1,"fa","fa-refresh","my-2",2,"cursor","pointer",3,"click"],["cdkDropListGroup","","class","row animated fadeIn",4,"ngIf"],["class","row animated fadeIn",4,"ngIf"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["href","#/channels",1,"btn","btn-block","btn-info"],[1,"avatar","avatar-xs"],["src","assets/img/avatars/0.png","class","img-avatar",3,"tooltip","alt",4,"ngIf"],["class","img-avatar",3,"tooltip","src","alt",4,"ngIf"],["src","assets/img/avatars/0.png",1,"img-avatar",3,"tooltip","alt"],[1,"img-avatar",3,"tooltip","src","alt"],["cdkDropListGroup","",1,"row","animated","fadeIn"],[1,"card"],[1,"card-header","bg-warning"],[1,"btn","btn-success","btn-sm","float-right",3,"click"],[1,"fa","fa-plus"],["cdkDropList","","id","incoming",1,"card-body",2,"min-height","300px",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","","class","card",4,"ngFor","ngForOf"],[1,"card-header","bg-primary"],["cdkDropList","","id","progress",1,"card-body",2,"min-height","300px",3,"cdkDropListData","cdkDropListDropped"],[1,"card-header","bg-success"],["cdkDropList","","id","done",1,"card-body",2,"min-height","300px",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","",1,"card"],["class","example-custom-placeholder",4,"cdkDragPlaceholder"],[1,"card-body","cursor-pointer","p-2",3,"click"],[1,"card-footer","p-1"],[1,"col-10","d-inline-flex"],[1,"m-0","p-0"],[1,"col-2"],["dropdown","",1,"float-right","pr-1"],["class","btn btn-ghost-info btn-xs","dropdownToggle","",3,"tooltip",4,"ngIf"],["class","btn btn-ghost-warning btn-xs","dropdownToggle","",3,"tooltip",4,"ngIf"],["class","btn btn-ghost-danger btn-xs","dropdownToggle","",3,"tooltip",4,"ngIf"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],[1,"example-custom-placeholder"],["src","assets/img/avatars/0.png","class","img-avatar",3,"alt",4,"ngIf"],["class","img-avatar",3,"src","alt",4,"ngIf"],["src","assets/img/avatars/0.png",1,"img-avatar",3,"alt"],[1,"img-avatar",3,"src","alt"],["dropdownToggle","",1,"btn","btn-ghost-info","btn-xs",3,"tooltip"],[1,"fa","fa-arrow-down"],["dropdownToggle","",1,"btn","btn-ghost-warning","btn-xs",3,"tooltip"],[1,"fa","fa-arrow-right"],["dropdownToggle","",1,"btn","btn-ghost-danger","btn-xs",3,"tooltip"],[1,"fa","fa-arrow-up"],["role","menu",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[3,"click"],[1,"float-right","pr-1"],["class","btn btn-ghost-info btn-xs",3,"tooltip",4,"ngIf"],["class","btn btn-ghost-warning btn-xs",3,"tooltip",4,"ngIf"],["class","btn btn-ghost-danger btn-xs",3,"tooltip",4,"ngIf"],[1,"btn","btn-ghost-info","btn-xs",3,"tooltip"],[1,"btn","btn-ghost-warning","btn-xs",3,"tooltip"],[1,"btn","btn-ghost-danger","btn-xs",3,"tooltip"],[1,"row","animated","fadeIn"],[1,"col-12","text-center"],["class","text-muted mt-5",4,"ngIf"],["class","btn btn-sm btn-success mt-5",3,"click",4,"ngIf"],[1,"text-muted","mt-5"],[1,"btn","btn-sm","btn-success","mt-5",3,"click"],[3,"task","channel","closed","deleted"],[1,"modal-header"],[1,"modal-title"],["aria-label","Close","type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["matInput","","type","text","formControlName","taskNo","placeholder","Task Number"],[4,"ngIf"],["matInput","","type","text","formControlName","name","placeholder","Task Name"],[1,"d-block","mt-2"],["matInput","","type","text","formControlName","description","placeholder","Description","rows","3"],["formControlName","dueDate","matInput","","placeholder","Due Date","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["dobPicker",""],["formControlName","priority"],["formControlName","assignedTo","multiple",""],[1,"btn","btn-block","btn-success","mt-1",3,"click"]],template:function(t,c){1&t&&(p.ec(0,"div",0),p.Wc(1,Ht,23,7,"div",1),p.Wc(2,Bt,1,2,"app-task-view",2),p.dc(),p.Wc(3,nc,36,10,"ng-template",null,3,p.Xc)),2&t&&(p.yc("ngSwitch",c.view),p.Kb(1),p.yc("ngSwitchCase",1),p.Kb(1),p.yc("ngSwitchCase",2))},directives:[i.o,i.p,i.m,i.l,b.c,g.b,a.c,a.p,a.f,b.g,b.f,h.a,v.j,y.a,o.d,o.c,o.a,o.b,k.a,k.b,k.d,ot,a.z,a.q,a.i,a.g,I.b,a.v,I.d,I.a,b.b],styles:[".btn-group-xs[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-xs[_ngcontent-%COMP%]{padding:.05rem .1rem;font-size:.765625rem;line-height:1;border-radius:.15rem}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),t}(),oc=e("981U"),rc=e("cFi/"),sc=e("6SRb"),dc=(e("O3VH"),e("Z5FQ"),e("kPAF"));e("K1XT");var lc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)}}),t}(),mc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)},imports:[[v.n,v.g,dc.c,lc],v.g,lc]}),t}(),pc=(e("LR82"),e("fQLH"),e("8Fqk"),e("gQst"),e("pN2L"),e("iUUs"),e("pNmx")),uc=e("xEVn");e("VgM4"),e("gbHE"),e("F5oi"),e("G2Mx"),e("AouM"),e("z5yO"),e("Jg5f"),e("U3QC"),e("diMa"),e("DwTn"),e("5NKx"),e("XpHP");var fc={provide:new p.t("mat-autocomplete-scroll-strategy"),deps:[pc.c],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},bc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)},providers:[fc],imports:[[v.k,pc.f,v.g,i.c],uc.b,v.k,v.g]}),t}(),gc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)},imports:[[i.c,k.c,y.b.forRoot(),u.b.forChild(),b.e,a.u,mc,g.c,bc,I.c,h.b,K.b]]}),t}(),hc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)},imports:[[i.c,rc.a,sc.a,b.e,a.u,g.c,k.c,y.b.forRoot(),h.b,gc,L.a]]}),t}(),vc=[{path:"",data:{title:"Tasks"},children:[{path:"",component:ac,data:{title:""}}]}],yc=function(){function t(){}return t.\u0275mod=p.Wb({type:t}),t.\u0275inj=p.Vb({factory:function(c){return new(c||t)},providers:[{provide:v.d,useValue:"en-GB"}],imports:[[i.c,oc.g.forChild(vc),u.b.forChild(),b.e,a.u,o.e,y.b.forRoot(),k.c,g.c,h.b,hc,I.c]]}),t}()}}]);